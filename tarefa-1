
--> Criação do Banco de Dados
create database TESTE_API
///

--> Criação da tabela de Estados
CREATE TABLE ESTADO (
   ID INT(11) NOT NULL AUTO_INCREMENT COMMENT 'ID DO REGISTRO',
   NOME VARCHAR(100) NOT NULL DEFAULT '' COMMENT 'NOME DO ESTADO',
   SIGLA VARCHAR(2) NOT NULL DEFAULT '' COMMENT 'SIGLA DO ESTADO',
   PRIMARY KEY (ID),
   
   KEY IDX_ESTADO_1 (SIGLA), 
   UNIQUE KEY UNQ_ESTADO_1 (NOME),
   UNIQUE KEY UNQ_ESTADO_2 (SIGLA)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='CADASTRO DE ESTADOS';
///

--> Criação da tabela de Cidades
CREATE TABLE CIDADE (
   ID INT(11) NOT NULL AUTO_INCREMENT COMMENT 'ID DO REGISTRO',
   NOME VARCHAR(100) NOT NULL DEFAULT '' COMMENT 'NOME DA CIDADE',
   ID_ESTADO INT(11) NOT NULL DEFAULT 0 COMMENT 'ID DO ESTADO',
   PRIMARY KEY (ID),
   
   KEY IDX_CIDADE_1 (ID_ESTADO), 
   UNIQUE KEY UNQ_CIDADE_1 (NOME, ID_ESTADO),
   
   CONSTRAINT FK_CIDADE_ESTADO FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO (ID)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='CADASTRO DE CIDADES';
///

--> Criação da tabela de Cliente
CREATE TABLE CLIENTE (
   ID INT(11) NOT NULL AUTO_INCREMENT COMMENT 'ID DO REGISTRO',
   NOME VARCHAR(100) NOT NULL DEFAULT '' COMMENT 'NOME DO CLIENTE',
   DOCUMENTO VARCHAR(14)  NOT NULL DEFAULT '' COMMENT 'CNPJ/CPF DO CLIENTE',
   ID_CIDADE INT(11) NOT NULL DEFAULT 0 COMMENT 'ID DA CIDADE',
   STATUS VARCHAR(1)   NOT NULL DEFAULT '' COMMENT 'STATUS DO CLIENTE [A]ATIVO OU [I]INATIVO',
   PRIMARY KEY (ID),
   
   KEY IDX_CLIENTE_1 (ID_CIDADE), 
   
   CONSTRAINT FK_CLIENTE_CIDADE FOREIGN KEY (ID_CIDADE) REFERENCES CIDADE (ID)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='CADASTRO DE CLIENTES';
///

--> Criação da tabela de Coleta
CREATE TABLE COLETA (
   ID INT(11) NOT NULL AUTO_INCREMENT COMMENT 'ID DO REGISTRO',
   ID_CLIENTE INT(11) NOT NULL DEFAULT 0 COMMENT 'ID DO COLETA',
   ID_CIDADE INT(11) NOT NULL DEFAULT 0 COMMENT 'ID DA CIDADE',
   DATA_SOLICITACAO DATETIME DEFAULT NULL COMMENT 'DATA E HORA DA SOLICITAÇÃO DA COLETA',
   DATA_COLETA DATE DEFAULT NULL COMMENT 'DATA DA COLETA',
   DATA_ENTREGA DATE DEFAULT NULL COMMENT 'DATA DA ENTREGA',
   PRIMARY KEY (ID),
   
   KEY IDX_COLETA_1 (ID_CLIENTE), 
   KEY IDX_COLETA_2 (ID_CIDADE), 
   
   CONSTRAINT FK_COLETA_CLIENTE FOREIGN KEY (ID_CLIENTE) REFERENCES CIDADE (ID),
   CONSTRAINT FK_COLETA_CIDADE FOREIGN KEY (ID_CIDADE) REFERENCES CIDADE (ID)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='CADASTRO DE COLETAS';
///

--> Insere os estados
INSERT INTO ESTADO (NOME, SIGLA) VALUES ('MINAS GERAIS','MG')
///
INSERT INTO ESTADO (NOME, SIGLA) VALUES ('SAO PAULO','SP')
///
INSERT INTO ESTADO (NOME, SIGLA) VALUES ('RIO DE JANEIRO','RJ')
///

--> Insere a cidade
INSERT INTO CIDADE (NOME, ID_ESTADO) VALUES ('TRES PONTAS',1)
///
INSERT INTO CIDADE (NOME, ID_ESTADO) VALUES ('CAMPINAS',2)
///

--> Insere o cliente
INSERT INTO CLIENTE (NOME, DOCUMENTO, ID_CIDADE, STATUS) VALUES ('ALEX ANDRADE','12312312300', 1, 'A')
///
INSERT INTO CLIENTE (NOME, DOCUMENTO, ID_CIDADE, STATUS) VALUES ('JOSE DA SILVA','01234567890', 2, 'A')
///

--> Insere dados da Coleta
INSERT INTO COLETA (ID_CLIENTE, ID_CIDADE, DATA_SOLICITACAO, DATA_COLETA, DATA_ENTREGA) 
VALUES (1,1, STR_TO_DATE('20/03/2023 09:14:37','%d/%m/%Y %H:%i:%s'), STR_TO_DATE('20/03/2023','%d/%m/%Y'), STR_TO_DATE('20/03/2023','%d/%m/%Y'))
///
INSERT INTO COLETA (ID_CLIENTE, ID_CIDADE, DATA_SOLICITACAO, DATA_COLETA, DATA_ENTREGA) 
VALUES (1,1, STR_TO_DATE('21/03/2023 09:14:37','%d/%m/%Y %H:%i:%s'), STR_TO_DATE('21/03/2023','%d/%m/%Y'), NULL)
///
INSERT INTO COLETA (ID_CLIENTE, ID_CIDADE, DATA_SOLICITACAO, DATA_COLETA, DATA_ENTREGA) 
VALUES (1,1, STR_TO_DATE('24/03/2023 09:14:37','%d/%m/%Y %H:%i:%s'), NULL, NULL)
///
INSERT INTO COLETA (ID_CLIENTE, ID_CIDADE, DATA_SOLICITACAO, DATA_COLETA, DATA_ENTREGA) 
VALUES (2,2, STR_TO_DATE('24/03/2023 09:14:37','%d/%m/%Y %H:%i:%s'), NULL, NULL)
///
